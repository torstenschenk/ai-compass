**1. Content & Wording**
The roadmap serves as the "Prescription" following the "Diagnosis." The tone is actionable, chronological, and highly personalized.
Component Header:
Headline: AI-Compass: "Next Best Action" Roadmap
Sub-headline: Your personalized pathway to maturity, based on successful "Lookalike" trajectories and critical gap resolution.
Phase 1: Foundation (0-3 Months)
Focus: Cultural alignment and strategic bedrock.
Mandatory Inclusion (from Gap Analysis): "Initiate AI Literacy & Change Management Program to bridge the Talent Gap.
"Actionable Step: Establish a cross-functional AI Steering Committee.
Phase 2: Implementation (3-9 Months)Focus: Scaling infrastructure and delivering use cases.
Success Trajectory Item: "Deploy the first Pilot Use Case identified in the k-NN Peer Benchmark (e.g., Automated Customer Support).
"Actionable Step: Implement a centralized Data Access Layer for AI experimentation.
Phase 3: Optimization (9+ Months)
Focus: Sustainable governance and process automation.
Mandatory Inclusion (from Gap Analysis): "Formalize the AI Code of Conduct and Governance Framework to ensure long-term EU AI Act compliance.
"Actionable Step: Integrate AI-driven performance tracking into core business processes.

**2. Design & UI Specifications**
The UI must visualize a journey, moving from left to right or top to bottom, using a clear timeline metaphor.
Layout:
Timeline Track: A vertical or horizontal "Roadmap Path" with three distinct nodes representing the Phases.
Phase Containers: Distinct cards for each phase, utilizing a "Step-by-Step" numbering system (Step 01, 02, 03).
Visual Elements:
Connectors: Dotted or solid lines connecting the phase nodes to indicate progression.
Highlighting "Must-Win" Battles: Recommendations derived from the Strategic Gap Analysis should be marked with a "Priority" badge or a different border color (e.g., the Critical Red from the Gap Analysis).
Color Palette:
Phase 1 (Light Blue): Representing clarity and beginning.
Phase 2 (Deep Blue): Representing action and depth.
Phase 3 (Purple/Violet): Representing maturity and integration.
Interactive Elements: Hover states on each recommendation that reveal a "Why this matters" tooltip (linking back to the k-NN or Gap logic).

**3. Technical Requirements (MVP Implementation)**
The "Recommendation Engine" must synthesize the Gap Analysis and the k-NN Peer Group data.
Success Trajectory Engine (k-NN Logic):
Query: Search the database for companies with a maturity score $\text{User Score} \times 1.25$.
Extraction: Identify the "Checklist Items" that these lookalikes have completed which the user is still missing.
Ranking: Select the two most common "completed" items from the peer group to populate Phase 2 and 3.
Mandatory Injection Logic:
Trigger: The system must pull the Item_IDs identified in the Strategic Gap Analysis.
Placement: * If the gap is "People/Culture," inject it into Phase 1.
If the gap is "Governance/Technical," inject it into Phase 3.
Phasing Algorithm:
Categorize all potential recommendations into a Tag_Library (e.g., Tag: Foundation, Tag: Implementation, Tag: Optimization).
Ensure the output generates exactly one (1) "Must-Win" Battle and at least one (1) "Peer-Based" recommendation per phase.
Data Integrity: Ensure that no recommendation suggested in the Roadmap is already marked as "Complete" in the user's initial checklist.



# Roadmap — Next Best Action (MVP)

## Endpoint + Data
Rendered on Results Page from:
- `GET /api/v1/assessments/{assessment_id}?token={access_token}`

Required payload parts:
- `dimension_scores` (7 values, 0–5)
- `strategic_gaps` (exactly 2 items from Gap Analysis)
- `benchmark` (percentile + cohort label)

## Output Contract (what the backend should return)
Return a deterministic object (optionally LLM-rephrased, but same structure):
```json
{
  "roadmap": {
    "headline": "AI-Compass: Next Best Action Roadmap",
    "subheadline": "Your personalized pathway to maturity, based on your top gaps and peer context.",
    "phases": [
      {
        "step": 1,
        "title": "Foundation",
        "timeframe": "0–3 Months",
        "items": [
          {"title": "...", "tag": "must_win", "why": "..."},
          {"title": "...", "tag": "peer_based", "why": "..."}
        ]
      },
      {
        "step": 2,
        "title": "Implementation",
        "timeframe": "3–9 Months",
        "items": [
          {"title": "...", "tag": "peer_based", "why": "..."},
          {"title": "...", "tag": "tactical", "why": "..."}
        ]
      },
      {
        "step": 3,
        "title": "Optimization",
        "timeframe": "9+ Months",
        "items": [
          {"title": "...", "tag": "peer_based", "why": "..."},
          {"title": "...", "tag": "must_win", "why": "..."}
        ]
      }
    ]
  }
}
```

## Generation Rules (MVP)
1. Always generate **exactly 3 phases**: Foundation, Implementation, Optimization.
2. Always include **exactly one “Must-Win”** item per phase **when available**.
3. **Mandatory injection** (from Gap Analysis):
   - If a gap category is **People/Culture** → inject into **Phase 1** as `tag=must_win`.
   - If a gap category is **Governance/Compliance/Ethics** → inject into **Phase 3** as `tag=must_win`.
   - If a gap category is **Data Foundation** → inject into **Phase 1** (or Phase 2 if you prefer, but be consistent).
4. **Peer-based** items (MVP-light): choose 1 item per phase from a fixed **Recommendation Library** keyed by the user’s lowest dimension scores (or lowest vs peer mean if you have it). Mark these as `tag=peer_based`.
5. **De-duplication:** do not repeat the same recommendation title across phases.
6. **No blocked suggestions:** do not propose actions that are already flagged as “complete” (if you track checklist status; if not, skip this rule).
7. If LLM is used: it may **rewrite descriptions**, but must not change selected items/phase placement.

## UI Requirements (MVP)
- Timeline layout with 3 step cards:
  - **Step 01 / 02 / 03** labels
  - connectors (line/dots) between steps
- Each item shows:
  - title
  - short description (1 sentence)
  - optional badge: **Priority** for `must_win`
- Tooltip on hover: “Why this matters” (use `why`).
- Responsive: 3-step horizontal on desktop, stacked vertical on mobile.

